document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("floux-form");if(!e)return void console.error("Adicione o código '<div id='floux-form'></div>' ao seu HTML para exibir o formulário.");var t=document.querySelector('script[src$="floux-form-widget.min.js"]'),n=t.getAttribute("data-floux-form"),o=t.getAttribute("data-floux-account");if(!n||!o)return void console.error("A instalação do script para configuração do formulário está incorreta.");fetch(`https://crm.floux.digital/flows/trigger/8615b97b-6418-473b-a197-cf5ac52a0f99?form_id=${n}&account=${o}`).then(e=>{if(!e.ok)throw new Error("O formulário não foi encontrado");return e.json()}).then(t=>{if(t?.error)throw new Error(t.error);if("published"!=t.status)throw new Error("O formulário não está publicado. Acesse o CRM Floux para corrigir.");e.innerHTML=`<style>#floux-form-container{transition:all .15s;display:flex;position:relative;width:100%;justify-content:center;background-color:${t.form_background}}#floux-form-container .floux-form-wrapper{width:100%;max-width:840px}#floux-form-container .floux-form-title{width:100%;text-align:center;color:${t.title_color}}#floux-form-container .floux-form-item{font-size:1em;display:flex;flex-direction:column;padding-top:12px;padding-bottom:12px;position:relative}#floux-form-container .floux-form-item label{font-size:.85em;color:${t.label_color}}#floux-form-container .floux-form-item input{padding:.75em 1em;font-size:1em;margin-top:8px;margin-bottom:8px;border-radius:8px;box-shadow:none;display:block;font-size:1rem;font-weight:400;line-height:1.5;background-clip:padding-box;background-color:${t.input_background};border:1px solid ${t.input_border_color};color:${t.input_text_color};appearance:none;border-radius:4px}#floux-form-container .floux-form-item input:focus{outline:0;box-shadow:0 0 0 0.25rem ${t.button_color}40}#floux-form-container .floux-form-item.is-invalid::after{content:"";position:absolute;height:8px;width:8px;background-color:red;top:60px;right:12px;border-radius:4px}#floux-form-container .floux-form-item .floux-form-help-text{font-size:.75em;color:${t.help_text_color};display:none}.show-floux-help-text{display:block!important}#floux-form-container .floux-form-item .floux-button{margin-top:1em;font-size:1em;padding-top:1em;padding-bottom:1em;padding-left:2em;padding-right:2em;background-color:${t.button_color};border-color:${t.button_color};color:${t.button_text_color};font-weight:600;border-radius:8px;border-width:1px;box-shadow:inset 0 1px 0 rgba(255,255,255,.15),0 1px 1px rgba(0,0,0,.075)}#floux-form-container .floux-form-item .floux-button:not(:disabled){cursor:pointer}#floux-form-container .floux-form-text-disclaimer{font-size:.825em;line-height:1.5;text-align:center;margin-top:16px;color:${t.disclaimer_text_color}}#floux-form-container .floux-response{display:none}#floux-form-container .floux-show{display:flex;position:absolute;top:0;width:calc(100% - 32px);height:100%;background-color:#fff;flex-direction:column;justify-content:center;align-items:center}</style><div id="floux-form-container"><div class="floux-form-wrapper">${t.title?`<h3 class="floux-form-title">${t.title}</h3>`:""}<form id="floux-formidable"><div class="floux-form-item"><label for="floux-form-field-name">Nome</label><input type="text" name="name" id="floux-form-field-name" class="floux-form-control" inputmode="text" aria-describedby="floux-form-help-name" autocomplete="given-name" placeholder="Nome"><div id="floux-form-help-name" class="floux-form-help-text">Pelo menos 3 caracteres</div></div><div class="floux-form-item"><label for="floux-form-field-email">E-mail</label><input type="text" name="email" id="floux-form-field-email" class="floux-form-control" inputmode="email" autocomplete="email" placeholder="E-mail" aria-describedby="floux-form-help-email"><div id="floux-form-help-email" class="floux-form-help-text">Informe um e-mail válido</div></div><div class="floux-form-item"><label for="floux-form-field-phone">Telefone / Whatsapp</label><input type="text" name="phone" id="floux-form-field-phone" class="floux-form-control" inputmode="tel" autocomplete="tel-national" placeholder="(99) 99999-9999" aria-describedby="floux-form-help-phone"><div id="floux-form-help-phone" class="floux-form-help-text">Informe um telefone válido</div></div><div class="floux-form-item"><button id="floux-form-submit" type="submit" class="floux-button">${t.button_text}</button></div></form><p class="floux-form-text-disclaimer">${t.disclaimer_text}</p></div><div id="floux-form-success" class="floux-response"><h3>Sucesso</h3><p>Seus dados foram enviados com sucesso. Aguarde o nosso contato.</p></div><div id="floux-form-fails" class="floux-response"><h3>Erro</h3><p>Desculpe, não foi possível enviar seus dados agora. Tente novamente mais tarde.</p></div></div>`;const a=document.querySelectorAll(".floux-form-control");a.forEach(function(e){e.addEventListener("focus",function(){e.parentElement.classList.remove("is-invalid");var t=e.closest(".floux-form-item").querySelector(".floux-form-help-text");t&&t.classList.remove("show-floux-help-text")})});const c=document.getElementById("floux-form-field-phone");c.addEventListener("input",function(e){const t=e.target,n=t.value.replace(/\D/g,"");t.value=n.length<=2?"("+n:n.length<=7?"("+n.slice(0,2)+") "+n.slice(2):n.length<=10?"("+n.slice(0,2)+") "+n.slice(2,6)+"-"+n.slice(6):"("+n.slice(0,2)+") "+n.slice(2,7)+"-"+n.slice(7,11)});async function l(){if("function"==typeof gtag&&gtag("event","sending_form_start"),document.getElementById("floux-form-field-name").disabled=!0,document.getElementById("floux-form-field-email").disabled=!0,document.getElementById("floux-form-field-phone").disabled=!0,document.getElementById("floux-form-submit").disabled=!0,document.getElementById("floux-form-submit").textContent=t.button_wait,document.getElementById("floux-form-field-name").value.length<3)return document.getElementById("floux-form-field-name").parentElement.classList.add("is-invalid"),document.getElementById("floux-form-help-name").classList.add("show-floux-help-text"),"function"==typeof gtag&&gtag("event","sending_form_error",{description:"name_is_invalid",type:"design"}),void i();if(!function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(document.getElementById("floux-form-field-email").value))return document.getElementById("floux-form-field-email").parentElement.classList.add("is-invalid"),document.getElementById("floux-form-help-email").classList.add("show-floux-help-text"),"function"==typeof gtag&&gtag("event","sending_form_error",{description:"email_is_invalid",type:"design"}),void i();if(!function(e){return/^\([1-9]{2}\) (?:[2-8]|9[0-9])[0-9]{3}\-[0-9]{4}$/.test(e)}(document.getElementById("floux-form-field-phone").value))return document.getElementById("floux-form-field-phone").parentElement.classList.add("is-invalid"),document.getElementById("floux-form-help-phone").classList.add("show-floux-help-text"),"function"==typeof gtag&&gtag("event","sending_form_error",{description:"phone_is_invalid",type:"design"}),void i();const e=new Date,n={name:document.getElementById("floux-form-field-name").value,email:document.getElementById("floux-form-field-email").value,phone:document.getElementById("floux-form-field-phone").value,date:e.toISOString(),create_deal:t.create_deal,deal_pipe:t.create_deal?t.deal_pipe:null,account:o,interest:document.title,origin:window.location.href.split("?")[0]};try{const e=await fetch("https://faas-sfo3-7872a1dd.doserverless.co/api/v1/namespaces/fn-05bb35f0-7d1f-4a1e-bf42-dc2b4f802886/actions/flouxes/form?blocking=true&result=true",{method:"POST",headers:{"Content-Type":"application/json","Authorization":"Basic NDMwMDdlYjktYWQ3NC00ODU3LWJjYmItMGFiNDIyOGRmMDg2Ok43Tk16YXdEaWFEZ2lLSHJzRDNvVmFRRlIyYzl6NjdkTXRsaFJuazdnV0JYQzBZTXdxUWtGZ3F4aGRhUXdUUk0="},body:JSON.stringify(n)});if(e.ok){let o=await e.json();201==o.statusCode?("function"==typeof gtag&&gtag("event","generate_lead",{currency:"BRL",value:1}),document.getElementById("floux-form-success").classList.add("floux-show")):("function"==typeof gtag&&gtag("event","sending_form_error",{description:"serverless_function_error",type:"code"}),document.getElementById("floux-form-fails").classList.add("floux-show"),console.error("Erro devolvido pela função: ",o.message))}else"function"==typeof gtag&&gtag("event","sending_form_error",{description:"serverless_response_is_not_ok",type:"code"}),document.getElementById("floux-form-fails").classList.add("floux-show"),console.error("Erro ao enviar os dados para criação de deal.")}catch(e){"function"==typeof gtag&&gtag("event","sending_form_error",{description:"client_try_exception",type:"code"}),document.getElementById("floux-form-fails").classList.add("floux-show"),console.error("Erro na requisição para criação de deal:",e)}document.getElementById("floux-form-field-name").value="",document.getElementById("floux-form-field-email").value="",document.getElementById("floux-form-field-phone").value="",i()}function i(){document.getElementById("floux-form-field-name").disabled=!1,document.getElementById("floux-form-field-email").disabled=!1,document.getElementById("floux-form-field-phone").disabled=!1,document.getElementById("floux-form-submit").disabled=!1,document.getElementById("floux-form-submit").textContent=t.button_text}document.getElementById("floux-formidable").addEventListener("submit",async function(e){e.preventDefault(),await l()})}).catch(e=>console.error(e))});